# aws-wordpress-project
Architecture for a wordpress application in AWS

## Requirements

| Name   | Version |
|--------|---------|
| terraform | >= 1.10 |
| aws       | >= 5.5 |

## Providers

| Name   | Version |
|--------|---------|
| aws       | >= 5.5 |


## Modules

| Name                                | Source                                   | Version   |
|-------------------------------------|------------------------------------------|-----------|
| S3                                  | terraform-aws-modules/s3-bucket/aws      | 4.3.0     |
| RDS                                 | terraform-aws-modules/rds/aws            | 6.10.0    |
| VPC                                 | terraform-aws-modules/vpc/aws            | 5.17.0    |
| EC2                                 | terraform-aws-modules/ec2/aws            | 5.2.1     |

## Wordpress version
Modify the variable "wp_version" with the desire wordpress version

## Contents

The repository contains the necessary YAML files to deploy the following infrastructure to host a WordPress application in two environment (called QA and PROD).

Modify the values labeled "MODIFY_ME" in the files qa-terraform.tfvars and prod-terraform.tfvars with the parameters of your choice to deploy the resources. The infrastructure consists of auto-scaling machines in private subnets, which are accessible only through the load balancer. By modifying the specified parameters, you will be able to access the application through the DNS configuration on Route 53. From there, users will be redirected to the CloudFront CDN, which will serve static content from an S3 bucket. The dynamic content will be generated by the WordPress applications running on the machines. The auto-scaling instances have an EFS mounted for shared application files, and everything will be served via an Apache web server.

## Installation and use

Download the repository and open a terminal in the terraform folder.

If you want to configure a backend different from your local machine, uncomment the backend section in the provider.tf file, insert the desired configurations, and then run the following command:
```
terraform init -backend-config=provider.tf
```
Create the two deidcated workspace with these commands:

```
terraform workspace new qa
terraform workspace new prod
```

After the creation the workspace chose them with these commands:

```
terraform workspace select qa
terraform workspace select prod
```

Replace all MODIFY_ME files with the desired parameters and run:

For the QA deploy:

```
terraform workspace select qa 
terraform init
terraform plan -var-file=../variables/qa-terraform.tfvars
```

Read the output and check if it is expected, after that run 

```
terraform apply -var-file=../variables/qa-terraform.tfvars
```

For the PROD deploy:

```
terraform workspace select prod
terraform init
terraform plan -var-file=../variables/prod-terraform.tfvars
```

read the output and check if it is expected, after that run 

```
terraform apply -var-file=../variables/qa-terraform.tfvars
```



